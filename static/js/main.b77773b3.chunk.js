(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{253:function(e,t,n){e.exports=n(254)},254:function(e,t,n){"use strict";n.r(t);var a=n(3),i=n(4),o=n(9),r=n(16),c=n(8),l=n(15),s=n(122),d=n.n(s),h=n(229),u=n.n(h),p=n(230),m=n.n(p),g=(n(261),n(298)),f=["Kamyas","Oregano","Mango","Golden Photos","Croton","person"],v=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(l)))).state={model:null,preview:"",predictions:[]},n.onDrop=function(e,t,a){n.setState({preview:e[0].preview||a[0]})},n.cropToCanvas=function(e,t,n){var a=e.naturalWidth,i=e.naturalHeight;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.fillStyle="#000000",n.fillRect(0,0,t.width,t.height);var o=Math.min(t.width/e.naturalWidth,t.height/e.naturalHeight),r=Math.round(a*o),c=Math.round(i*o);n.drawImage(e,0,0,a,i,(t.width-r)/2,(t.height-c)/2,r,c)},n.onImageChange=function(e){var t=document.getElementById("canvas"),i=t.getContext("2d");n.cropToCanvas(e.target,t,i);var o=n.state.model.inputs[0].shape.slice(1,3),r=Object(a.a)(o,2),c=r[0],l=r[1],s=g.tidy(function(){return g.image.resizeBilinear(g.browser.fromPixels(t),[c,l]).div(255).expandDims(0)});n.state.model.executeAsync(s).then(function(e){var n="16px sans-serif";i.font=n,i.textBaseline="top";var o,r=Object(a.a)(e,4),c=r[0],l=r[1],s=r[2],d=r[3],h=c.dataSync(),u=l.dataSync(),p=s.dataSync(),m=d.dataSync()[0];for(g.dispose(e),o=0;o<m;++o){var v=h.slice(4*o,4*(o+1)),w=Object(a.a)(v,4),y=w[0],b=w[1],j=w[2],x=w[3];y*=t.width,j*=t.width,b*=t.height;var D=j-y,F=(x*=t.height)-b,O=f[p[o]],S=u[o].toFixed(2);i.strokeStyle="#00FFFF",i.lineWidth=4,i.strokeRect(y,b,D,F),i.fillStyle="#00FFFF";var C=i.measureText(O+":"+S).width,E=parseInt(n,10);i.fillRect(y,b,C+4,E+4)}for(o=0;o<m;++o){var I=h.slice(4*o,4*(o+1)),k=Object(a.a)(I,3),M=k[0],z=k[1];M*=t.width,z*=t.height;var B=f[p[o]],N=u[o].toFixed(2);i.fillStyle="#000000",i.fillText(B+":"+N,M,z)}})},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="Digital Image Processing Plant Identifier",g.loadGraphModel("/web_model/model.json").then(function(t){e.setState({model:t})})}},{key:"render",value:function(){return d.a.createElement("div",{className:"Dropzone-page"},this.state.model?d.a.createElement(m.a,{className:"Dropzone",accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!1,onDrop:this.onDrop},this.state.preview?d.a.createElement("img",{alt:"upload preview",onLoad:this.onImageChange,className:"Dropzone-img",src:this.state.preview}):"Choose or drop a file.",d.a.createElement("canvas",{id:"canvas",width:"640",height:"640"})):d.a.createElement("div",{className:"Dropzone"},"Loading model..."))}}]),t}(d.a.Component),w=document.getElementById("root");u.a.render(d.a.createElement(v,null),w)},261:function(e,t,n){},267:function(e,t){},268:function(e,t){},276:function(e,t){},286:function(e,t){},287:function(e,t){},288:function(e,t){},289:function(e,t){},297:function(e,t){}},[[253,2,1]]]);
//# sourceMappingURL=main.b77773b3.chunk.js.map